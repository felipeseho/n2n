file:
  inputPath: "C:/Users/jose.fagundes.EXA-ARKNT356196/Projects/repositories/github/n2n/data/afagu.csv"
  batchLines: 1
  startLine: 1
  maxLines: 1 # Opcional: limita o número de linhas a processar (útil para testes)
  logDirectory: "logs" # Diretório onde os logs serão salvos
  csvDelimiter: ","
  checkpointDirectory: "checkpoints" # Diretório onde os checkpoints serão salvos
  columns:
    - column: "subscription_id"
      type: "string"

    - column: "campaign"
      type: "string"

    - column: "subpartner"
      type: "string"

    # 2024-05-14 00:00:00.000
    - column: "sale_date"
      type: "date"
      format: "yyyy-MM-dd HH:mm:ss.fff"

    - column: "user.cpf"
      type: "string"

    - column: "user.cpf"
      type: "string"

    - column: "user.cnpj"
      type: "string"

    - column: "user.email"
      type: "string"

    - column: "user.msisdn"
      type: "string"

    - column: "user.name"
      type: "string"

# Nome da coluna CSV que contém o nome do endpoint a ser usado (opcional)
# Se configurada, cada linha pode especificar qual endpoint usar
# endpointColumnName: "Endpoint"

# Endpoint padrão a ser usado quando não especificado via --endpoint-name ou coluna CSV (opcional)
# Se não configurado e houver apenas 1 endpoint, ele será usado automaticamente
defaultEndpoint: "subscription_create"

# Lista de endpoints nomeados (obrigatório - deve ter pelo menos um)
# Cada endpoint tem sua própria URL, autenticação e mapeamento
endpoints:
  - name: "subscription_create"
    endpointUrl: "https://api-hub-homol.whitelabel.com.br/hub-connect/v1/hub-connect-api/events/ingest"
    # endpointUrl: "https://teste-elder.requestcatcher.com/test"
    # headers:
    #   Authorization: "Bearer seu-token-aqui"
    #   X-Custom-Header: "valor-customizado"
    method: "POST"
    requestTimeout: 30
    retryAttempts: 3
    retryDelaySeconds: 5
    maxRequestsPerSecond: 20
    mapping:
      - attribute: "event"
        fixedValue: "subscription_suspension"

      - attribute: "eventDate"
        csvColumn: "sale_date"
        transform: "date-format:yyyy-MM-ddTHH:mm:ssZ"
      
      # Exemplo de fórmula: data/hora atual
      - attribute: "processedAt"
        formula: "now()"
      
      # Exemplo de fórmula: UUID único
      - attribute: "requestId"
        formula: "uuid()"

      - attribute: "partner"
        fixedValue: "afagu"

      - attribute: "path"
        fixedValue: "/api/v1/events/ingest"

      - attribute: "payload.subscriptionId"
        csvColumn: "subscription_id"

      - attribute: "payload.campaign"
        csvColumn: "campaign"
        transform: "lowercase"

      - attribute: "payload.subpartnerId"
        csvColumn: "subpartner"

      - attribute: "payload.cpf"
        csvColumn: "user.cpf"

      - attribute: "payload.cnpj"
        csvColumn: "user.cnpj"

      - attribute: "payload.email"
        csvColumn: "user.email"
        transform: "empty-to-null"

      - attribute: "payload.msisdn"
        csvColumn: "user.msisdn"

      - attribute: "payload.name"
        csvColumn: "user.name"
