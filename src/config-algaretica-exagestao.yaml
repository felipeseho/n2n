file:
  inputPath: "/Users/felipeseho/Desktop/bases/amostra-px-algaretica-exagestao-v2.csv"
  batchLines: 1000
  startLine: 1
  maxLines: 10000 # Opcional: limita o número de linhas a processar (útil para testes)
  logDirectory: "logs" # Diretório onde os logs serão salvos
  csvDelimiter: ","
  checkpointDirectory: "checkpoints" # Diretório onde os checkpoints serão salvos
  columns:
    - column: "subscription_id"
      type: "string"
    - column: "campaign"
      type: "string"
    - column: "partner"
      type: "string"
    - column: "start_date"
      type: "date"
      format: "yyyy-MM-ddTHH:mm:ss.fffZ"
    - column: "cpf"
      type: "string"
    - column: "cnpj"
      type: "string"
    - column: "email"
      type: "string"
      regex: "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"
    - column: "msisdn"
      type: "string"
    - column: "name"
      type: "string"

# Nome da coluna CSV que contém o nome do endpoint a ser usado (opcional)
# Se configurada, cada linha pode especificar qual endpoint usar
# endpointColumnName: "Endpoint"

# Endpoint padrão a ser usado quando não especificado via --endpoint-name ou coluna CSV (opcional)
# Se não configurado e houver apenas 1 endpoint, ele será usado automaticamente
defaultEndpoint: "subscription_create" # subscription_create  subscription_suspension  subscription_renew  subscription_cancel

# Lista de endpoints nomeados (obrigatório - deve ter pelo menos um)
# Cada endpoint tem sua própria URL, autenticação e mapeamento
endpoints:
  - name: "subscription_create"
    endpointUrl: "https://api-hub-homol.whitelabel.com.br/hub-connect/v1/hub-connect-api/events/ingest"
    # endpointUrl: "https://test-seho.requestcatcher.com/"
    # headers:
    #   Authorization: "Bearer seu-token-aqui"
    #   X-Custom-Header: "valor-customizado"
    method: "POST"
    requestTimeout: 30
    retryAttempts: 3
    retryDelaySeconds: 5
    maxRequestsPerSecond: 1000
    mapping:
      - attribute: "event"
        fixedValue: "subscription_create"
      - attribute: "eventDate"
        csvColumn: "start_date"
        transform: "date-format:yyyy-MM-ddT00:00:00Z"
      - attribute: "partner"
        csvColumn: "partner"
      - attribute: "path"
        fixedValue: "/api/v1/events/ingest"
      - attribute: "payload.campaign"
        csvColumn: "campaign"
      - attribute: "payload.cpf"
        csvColumn: "cpf"
        transform: "empty-to-null"
      - attribute: "payload.cnpj"
        csvColumn: "cnpj"
        transform: "empty-to-null"
      - attribute: "payload.email"
        csvColumn: "email"
        transform: "lowercase"
      - attribute: "payload.msisdn"
        csvColumn: "msisdn"
      - attribute: "payload.subscriptionId"
        csvColumn: "subscription_id"

  - name: "subscription_suspension"
    endpointUrl: "https://api-hub-homol.whitelabel.com.br/hub-connect/v1/hub-connect-api/events/ingest"
    # endpointUrl: "https://test-seho.requestcatcher.com/"
    # headers:
    #   Authorization: "Bearer seu-token-aqui"
    #   X-Custom-Header: "valor-customizado"
    method: "POST"
    requestTimeout: 30
    retryAttempts: 3
    retryDelaySeconds: 5
    maxRequestsPerSecond: 20
    mapping:
      - attribute: "event"
        fixedValue: "subscription_suspension"
      - attribute: "eventDate"
        formula: "now()"
      - attribute: "partner"
        csvColumn: "partner"
      - attribute: "path"
        fixedValue: "/api/v1/events/ingest"
      - attribute: "payload.campaign"
        csvColumn: "campaign"
      - attribute: "payload.cpf"
        csvColumn: "cpf"
        transform: "empty-to-null"
      - attribute: "payload.cnpj"
        csvColumn: "cnpj"
        transform: "empty-to-null"
      - attribute: "payload.email"
        csvColumn: "email"
        transform: "lowercase"
      - attribute: "payload.msisdn"
        csvColumn: "msisdn"
      - attribute: "payload.subscriptionId"
        csvColumn: "subscription_id"

  - name: "subscription_renew"
    endpointUrl: "https://api-hub-homol.whitelabel.com.br/hub-connect/v1/hub-connect-api/events/ingest"
    # endpointUrl: "https://test-seho.requestcatcher.com/"
    # headers:
    #   Authorization: "Bearer seu-token-aqui"
    #   X-Custom-Header: "valor-customizado"
    method: "POST"
    requestTimeout: 30
    retryAttempts: 3
    retryDelaySeconds: 5
    maxRequestsPerSecond: 20
    mapping:
      - attribute: "event"
        fixedValue: "subscription_renew"
      - attribute: "eventDate"
        formula: "now()"
      - attribute: "partner"
        csvColumn: "partner"
      - attribute: "path"
        fixedValue: "/api/v1/events/ingest"
      - attribute: "payload.campaign"
        csvColumn: "campaign"
      - attribute: "payload.cpf"
        csvColumn: "cpf"
        transform: "empty-to-null"
      - attribute: "payload.cnpj"
        csvColumn: "cnpj"
        transform: "empty-to-null"
      - attribute: "payload.email"
        csvColumn: "email"
        transform: "lowercase"
      - attribute: "payload.msisdn"
        csvColumn: "msisdn"
      - attribute: "payload.subscriptionId"
        csvColumn: "subscription_id"        

  - name: "subscription_cancel"
    endpointUrl: "https://api-hub-homol.whitelabel.com.br/hub-connect/v1/hub-connect-api/events/ingest"
    # endpointUrl: "https://test-seho.requestcatcher.com/"
    # headers:
    #   Authorization: "Bearer seu-token-aqui"
    #   X-Custom-Header: "valor-customizado"
    method: "POST"
    requestTimeout: 30
    retryAttempts: 3
    retryDelaySeconds: 5
    maxRequestsPerSecond: 20
    mapping:
      - attribute: "event"
        fixedValue: "subscription_cancel"
      - attribute: "eventDate"
        formula: "now()"
      - attribute: "partner"
        csvColumn: "partner"
      - attribute: "path"
        fixedValue: "/api/v1/events/ingest"
      - attribute: "payload.campaign"
        csvColumn: "campaign"
      - attribute: "payload.cpf"
        csvColumn: "cpf"
        transform: "empty-to-null"
      - attribute: "payload.cnpj"
        csvColumn: "cnpj"
        transform: "empty-to-null"
      - attribute: "payload.email"
        csvColumn: "email"
        transform: "lowercase"
      - attribute: "payload.msisdn"
        csvColumn: "msisdn"
      - attribute: "payload.subscriptionId"
        csvColumn: "subscription_id"          